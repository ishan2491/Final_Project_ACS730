{"filter":false,"title":"main.tf","tooltip":"/Modules/vpc/main.tf","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":107,"column":0},"action":"insert","lines":["# Create VPC","resource \"aws_vpc\" \"main\" {","  cidr_block           = var.vpc_cidr","  enable_dns_support   = true","  enable_dns_hostnames = true","","  tags = {","    Name = var.vpc_name","    Environment = var.environment","  }","}","","# Create Public Subnets","resource \"aws_subnet\" \"public\" {","  count             = length(var.public_subnet_cidrs)","  vpc_id            = aws_vpc.main.id","  cidr_block        = var.public_subnet_cidrs[count.index]","  availability_zone = element(var.availability_zones, count.index)","  map_public_ip_on_launch = true","","  tags = {","    Name = \"${var.vpc_name}-Public-Subnet-${count.index + 1}\"","    Environment = var.environment","  }","}","","# Create Private Subnets","resource \"aws_subnet\" \"private\" {","  count             = length(var.private_subnet_cidrs)","  vpc_id            = aws_vpc.main.id","  cidr_block        = var.private_subnet_cidrs[count.index]","  availability_zone = element(var.availability_zones, count.index)","","  tags = {","    Name = \"${var.vpc_name}-Private-Subnet-${count.index + 1}\"","    Environment = var.environment","  }","}","","# Internet Gateway","resource \"aws_internet_gateway\" \"igw\" {","  vpc_id = aws_vpc.main.id","","  tags = {","    Name = \"${var.vpc_name}-IGW\"","    Environment = var.environment","  }","}","","# NAT Gateway (for private subnets' internet access)","resource \"aws_eip\" \"nat_eip\" {","  count = length(var.public_subnet_cidrs)","","  tags = {","    Name = \"${var.vpc_name}-NAT-EIP-${count.index + 1}\"","    Environment = var.environment","  }","}","","resource \"aws_nat_gateway\" \"nat_gw\" {","  count         = length(var.public_subnet_cidrs)","  allocation_id = aws_eip.nat_eip[count.index].id","  subnet_id     = aws_subnet.public[count.index].id","","  tags = {","    Name = \"${var.vpc_name}-NAT-Gateway-${count.index + 1}\"","    Environment = var.environment","  }","}","","# Public Route Table and Routes","resource \"aws_route_table\" \"public_rt\" {","  vpc_id = aws_vpc.main.id","","  tags = {","    Name        = \"${var.vpc_name}-Public-RT\"","    Environment = var.environment","  }","}","","resource \"aws_route\" \"public_internet_access\" {","  route_table_id         = aws_route_table.public_rt.id","  destination_cidr_block = \"0.0.0.0/0\"","  gateway_id             = aws_internet_gateway.igw.id","}","","resource \"aws_route_table_association\" \"public_rta\" {","  count          = length(var.public_subnet_cidrs)","  subnet_id      = aws_subnet.public[count.index].id","  route_table_id = aws_route_table.public_rt.id","}","","# Private Route Table and Routes (using NAT Gateway)","resource \"aws_route_table\" \"private_rt\" {","  vpc_id = aws_vpc.main.id","","  tags = {","    Name        = \"${var.vpc_name}-Private-RT\"","    Environment = var.environment","  }","}","","resource \"aws_route\" \"private_nat_access\" {","  count                = length(var.private_subnet_cidrs)","  route_table_id       = aws_route_table.private_rt.id","  destination_cidr_block   =\"0.0.0.0/0\""," nat_gateway id",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":107,"column":0},"end":{"row":107,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1743720063036,"hash":"129e699c2de63e5423f094ad237dbb4d1dec7821"}